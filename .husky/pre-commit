#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit checks..."

# Run linters and formatters
echo "ğŸ“ Checking code formatting..."
npm run prettier:check || {
  echo "âŒ Prettier check failed. Run 'npm run prettier' to fix formatting."
  exit 1
}

echo "ğŸ” Running ESLint..."
npm run lint || {
  echo "âŒ ESLint check failed. Run 'npm run lint:fix' to fix issues."
  exit 1
}

echo "ğŸ” Running Solhint..."
npm run lint:solidity || {
  echo "âŒ Solhint check failed. Fix Solidity linting issues."
  exit 1
}

echo "ğŸ”’ Running security checks..."
npm audit --audit-level=moderate || {
  echo "âš ï¸  Security vulnerabilities found. Review and fix with 'npm audit fix'"
  exit 1
}

echo "âœ… All pre-commit checks passed!"
